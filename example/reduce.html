<script src="../tinytest.js"></script>
<script>
    // Prototype implementation:
    function reduce(array, callback, startingValue) {
        var accumulator;
        var intialIndex;
        accumulator = startingValue ? startingValue : array[0];
        intialIndex = startingValue ? 0 : 1;

        for (var i = intialIndex; i < array.length; i++) {
            accumulator = callback(accumulator, array[i], i, array);
        }
        return accumulator;
    }

    // Function signature:
    // reduce(array, callback[, initialValue])

    // callback parameters:
    // accumulator
    // currentValue
    // currentIndex
    // array

    // Returns a single value.

    // Requirements:

    // If initialValue, accumulator should start with initialValue.
    // If initialValue, currentValue should start with array[0].
    // If initialValue, callback will start at index 0, wich is the first element.

    // If no initialValue, accumulator should start with array[0].
    // If no initialValue, currentValue should start with array[1].
    // If no initialValue, callback will start at index 1.

    // If initialValue, and array is emmty, it should return initialValue without calling callback.
    // If no initialValue, and array has one element, it should return that element without calling callback.

    // It should actually reduce.
    // It should excludes holes (e.g. [/* Hole */, 1])
    // If array is empty, and no initialValue, throw TypeError.
    // It should pass array as fourth argument to callback.

    tests({
        'If initialValue, accumulator should start with initialValue.': function () {
            var startingValue = 2;
            reduce([1], function (acc, current) {
                eq(acc, startingValue);
            }, startingValue);
        },
        'If initialValue, currentValue should start with array[0].': function () {
            var startingValue = 2;
            reduce([1], function (acc, current) {
                eq(current, 1);
            }, startingValue);
        },
        'If initialValue, callback will start at index 0, wich is the first element.': function () {
            var startingValue = 2;
            reduce([1], function (acc, current, currentIndex) {
                eq(currentIndex, 0);
            }, startingValue);
        },
        'If no initialValue, accumulator should start with array[0].': function () {
            var startingValue = 2;
            reduce([1], function (acc, current, currentIndex) {
                eq(acc, 1);
            });
        },
        'If no initialValue, currentValue should start with array[1]': function () {
            fail();
        }
    });















</script>